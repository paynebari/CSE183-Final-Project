[[extend 'layout.html']]

<style>
[v-cloak] {
     display: none;
}
.scrollable-list {
    height: 400px; /* Adjust the height as needed */
    overflow-y: auto;
    /*border: 1px solid #dbdbdb;  Optional: adds a border around the list */
    padding: 10px; /* Optional: adds some padding inside the list */
}
.card.selected {
    background-color: #0049d1; /* Bulma's primary color */
    color: white; /* Optional: makes the text color white */
}
</style>

<div class="section" id="app" v-cloak>
  <!-- Put here your Vue.js template -->
  <h1 class="title"><i class="fa-solid fa-earth"></i> Region Information</h1>
  <nav class="level">
    <div class="level-item has-text-centered">
      <div>
        <p class="heading">Checklists</p>
        <p class="title"><i class="fa-solid fa-list-check"></i> {{ checklists.length }}</p>
      </div>
    </div>
    <div class="level-item has-text-centered">
      <div>
        <p class="heading">Total Sightings</p>
        <p class="title"><i class="is-4 fa-solid fa-eye"></i> {{ total_sightings }}</p>
      </div>
    </div>
    <div class="level-item has-text-centered">
      <div>
        <p class="heading">Top Contributors</p>
        <p class="title is-6" v-for="u in top_users">
            <i class="is-4 fa-solid fa-medal"></i> {{u[0]}}
        </p>
      </div>
    </div>
  </nav>
  <div class="columns">
    <div class="column is-two-fifths">
        <!--h1 class="title"><i class="fa-solid fa-cube"></i> Region Information</h1-->
        <!--p>Checklists: {{ checklists.length }}</p-->

    <!-- Species List -->
        <div class="scrollable-list">
            <div class="card mt-4" v-for="s in species" :key="s.id" :class="{ 'selected': selectedSpecies === s.id }" @click="selectSpecies(s)">
                <div class="card-content">
                    {{ s.type }}
                </div>
            </div>
        </div>
    </div>
    <div class="column">
        <div>
            <canvas id="myChart"></canvas>
        </div>
    </div>
  </div>
</div>


[[block page_scripts]]
<!-- Loads the index-specific js for Vue -->
<script>
  let my_callback_url = "[[=XML(my_callback_url)]]";
  let load_sightings_url = "[[=XML(load_sightings_url)]]";
  let load_species_url = "[[=XML(load_species_url)]]";
  let load_info_url = "[[=XML(load_info_url)]]";
  let load_names_url = "[[=XML(load_names_url)]]";
  let ne_lat = "[[=ne_lat]]";
  let ne_lng = "[[=ne_lng]]";
  let sw_lat = "[[=sw_lat]]";
  let sw_lng = "[[=sw_lng]]";
</script>

<!-- Chart.js script-->
<script src="https://cdn.jsdelivr.net/npm/vue@3"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-moment@1.0.0"></script>
<script src="js/location.js"></script>
[[end]]
